<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SALONIX - Admin Dashboard</title>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #FFF;
            color: #333843;
            overflow-x: hidden;
        }

        /* ==================== LAYOUT ==================== */
        .admin-layout {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        .admin-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .admin-bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .admin-bg-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(4.5px);
            background: rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        /* ==================== SIDEBAR ==================== */
        .sidebar {
            width: 264px;
            background: #FFF;
            border-right: 1px solid #F0F1F3;
            box-shadow: 4px 0 30px 0 rgba(131, 98, 234, 0.05);
            z-index: 100;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px 20px;
            height: 80px;
        }

        .sidebar-logo img {
            width: 100px;
            height: 79px;
        }

        .sidebar-menu {
            flex: 1;
            padding: 24px 18px 32px 18px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(0, 0, 0, 0.6);
            font-size: 14px;
            font-weight: 600;
            line-height: 20px;
        }

        .menu-item:hover {
            background: #F9F9FC;
        }

        .menu-item.active {
            background: #5C59E8;
            color: #FFF;
        }

        .menu-item svg {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .menu-item.active svg path {
            fill: #FFF;
        }

        /* ==================== MAIN CONTENT ==================== */
        .main-content {
            flex: 1;
            margin-left: 264px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* ==================== TOP BAR ==================== */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: #FFF;
            border-bottom: 1px solid #F0F1F3;
            box-shadow: 0 4px 30px 0 rgba(131, 98, 234, 0.05);
            height: 72px;
        }

        .menu-icon {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .divider {
            width: 1px;
            height: 40px;
            background: #F0F1F3;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            position: relative;
        }

        .user-avatar-img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #E0E2E7;
        }

        .user-status {
            position: absolute;
            right: 0;
            bottom: 0;
            width: 10px;
            height: 10px;
            background: #3DA172;
            border: 2px solid #FFF;
            border-radius: 50%;
        }

        .user-details h4 {
            color: #1A1C21;
            font-size: 14px;
            font-weight: 500;
            line-height: 20px;
        }

        .user-details p {
            color: #667085;
            font-size: 12px;
            font-weight: 500;
            line-height: 18px;
        }

        /* ==================== PAGE CONTAINER ==================== */
        .pagination-numbers-container {
            display: flex;
            gap: 8px;
            align-items: center;
        }


        .page-container.active {
            display: block;
        }

        /* ==================== SERVICES/STAFFS PAGE ==================== */
        .services-page, .staffs-page {
            padding: 40px 24px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .services-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 24px;
            background: #FFF;
            border: 1px solid #F0F1F3;
            border-bottom: none;
            gap: 12px;
            flex-wrap: wrap;
        }

        .services-title {
            color: #333843;
            font-size: 18px;
            font-weight: 500;
            line-height: 28px;
        }

        .services-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #5C59E8;
            background: #F9F9FC;
            min-width: 200px;
        }

        .search-box svg {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .search-box input {
            border: none;
            background: transparent;
            outline: none;
            flex: 1;
            color: #333843;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
        }

        .btn-add-service {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            gap: 8px;
            border-radius: 8px;
            background: #624DE3;
            color: #FFF;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .btn-add-service:hover {
            background: #5243c7;
        }

        /* ==================== TABLE ==================== */
        .services-table {
            background: #FFF;
            border: 1px solid #F0F1F3;
            border-top: none;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #F9F9FC;
        }

        th {
            padding: 18px 22px;
            text-align: left;
            color: #333843;
            font-size: 14px;
            font-weight: 500;
            line-height: 20px;
            border-bottom: 1px solid #F0F1F3;
        }

        th:last-child {
            text-align: center;
        }

        td {
            padding: 18px 22px;
            color: #667085;
            font-size: 14px;
            font-weight: 500;
            line-height: 20px;
            border-bottom: 1px solid #F0F1F3;
        }

        td:first-child {
            color: #333843;
        }

        .action-buttons {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .btn-action {
            display: inline-flex;
            padding: 8px 12px;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 12px;
            font-weight: 700;
            color: #FFF;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-view {
            background: #624DE3;
        }

        .btn-view:hover {
            background: #5243c7;
        }

        .btn-edit {
            background: #624DE3;
        }

        .btn-edit:hover {
            background: #5243c7;
        }

        .btn-delete {
            background: #E34D57;
        }

        .btn-delete:hover {
            background: #d43f49;
        }

        /* ==================== PAGINATION ==================== */
        .services-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 14px 24px;
            background: #FFF;
            border: 1px solid #F0F1F3;
            border-top: none;
        }

        .pagination {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pagination-btn {
            display: flex;
            width: 32px;
            height: 32px;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            background: #DEDEFA;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pagination-btn:hover {
            background: #d0cdf7;
        }

        .pagination-btn svg {
            width: 20px;
            height: 20px;
        }

        .pagination-number {
            display: flex;
            width: 32px;
            height: 32px;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            color: #5C59E8;
            font-size: 14px;
            font-weight: 600;
            background: #DEDEFA;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pagination-number.active {
            background: #5C59E8;
            color: #FFF;
        }

        .pagination-number:hover:not(.active) {
            background: #d0cdf7;
        }

        /* ==================== MODALS ==================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            pointer-events: auto;
            opacity: 1;
        }

        .modal-content {
            background: #FFF;
            border-radius: 8px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid #F0F1F3;
        }

        .modal-title {
            color: #333843;
            font-size: 18px;
            font-weight: 500;
            line-height: 28px;
        }

        .modal-body {
            padding: 24px;
        }

        .service-details {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .detail-row {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #979797;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            flex: 1;
            color: #818181;
            font-size: 16px;
            font-weight: 500;
            line-height: 150%;
        }

        .detail-value {
            flex: 1;
            color: #343434;
            font-size: 16px;
            font-weight: 500;
            line-height: 150%;
        }

        .modal-footer {
            padding: 24px;
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .btn-modal {
            display: flex;
            padding: 14px 24px;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            font-family: 'Jost', sans-serif;
            font-size: 18px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 189px;
        }

        .btn-modal-primary {
            background: #624DE3;
            color: #FFF;
        }

        .btn-modal-primary:hover {
            background: #5243c7;
        }

        .btn-modal-secondary {
            background: #000;
            color: #FFF;
        }

        .btn-modal-secondary:hover {
            background: #333;
        }

        .btn-modal-danger {
            background: #E34D50;
            color: #FFF;
        }

        .btn-modal-danger:hover {
            background: #d43f49;
        }

        .btn-modal-success {
            background: #2DA831;
            color: #FFF;
        }

        .btn-modal-success:hover {
            background: #259328;
        }

        /* ==================== FORM STYLES ==================== */
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
        }

        .form-label {
            color: #000;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 400;
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 16px;
            border-radius: 9px;
            border: 1px solid rgba(0, 0, 0, 0.4);
            background: #FFF;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            border-color: #5C59E8;
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: rgba(0, 0, 0, 0.4);
            font-weight: 300;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.7359 0.305918C11.5667 0.110038 11.3373 0 11.098 0C10.8588 0 10.6294 0.110038 10.4602 0.305918L5.99455 5.47795L1.52889 0.305919C1.35874 0.11559 1.13086 0.0102748 0.894315 0.0126552C0.657772 0.0150361 0.431501 0.124922 0.264235 0.318646C0.0969682 0.512371 0.00209099 0.774434 3.49167e-05 1.04839C-0.0020202 1.32235 0.0889117 1.58628 0.253246 1.78334L5.35673 7.69408C5.52591 7.88996 5.75534 8 5.99455 8C6.23377 8 6.4632 7.88996 6.63238 7.69408L11.7359 1.78334C11.905 1.5874 12 1.32169 12 1.04463C12 0.767572 11.905 0.501857 11.7359 0.305918Z' fill='black'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }

        .form-textarea {
            min-height: 151px;
            resize: vertical;
        }

        .form-row {
            display: flex;
            gap: 24px;
        }

        .form-row .form-group {
            flex: 1;
        }

        /* ==================== SUCCESS/CONFIRMATION MODALS ==================== */
        .modal-small {
            max-width: 556px;
        }

        .modal-icon {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
        }

        .icon-circle {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: #E8DEF8;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-circle svg {
            width: 36px;
            height: 36px;
        }

        .modal-message {
            color: #344054;
            text-align: center;
            font-size: 16px;
            font-weight: 400;
            line-height: 24px;
            margin-bottom: 32px;
        }

        .confirmation-message {
            color: #101828;
            font-size: 24px;
            font-weight: 500;
            line-height: 32px;
            margin-bottom: 32px;
        }

        .confirmation-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #DCFAE6;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }

        .confirmation-icon svg {
            width: 24px;
            height: 24px;
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .sidebar {
                width: 220px;
            }

            .main-content {
                margin-left: 220px;
            }

            .services-page, .staffs-page {
                padding: 24px 16px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .services-header {
                flex-direction: column;
                align-items: stretch;
            }

            .services-actions {
                width: 100%;
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }

            .btn-add-service {
                width: 100%;
            }

            .form-row {
                flex-direction: column;
            }

            .modal-footer {
                flex-direction: column;
            }

            .btn-modal {
                width: 100%;
            }

            .services-table {
                overflow-x: scroll;
            }

            table {
                min-width: 600px;
            }
        }

        @media (max-width: 480px) {
            .top-bar {
                padding: 12px 16px;
            }

            .services-page, .staffs-page {
                padding: 16px 12px;
            }

            .modal-content {
                width: 95%;
            }

            .modal-header,
            .modal-body,
            .modal-footer {
                padding: 16px;
            }

            th, td {
                padding: 12px 16px;
            }

            .action-buttons {
                flex-direction: column;
                width: 100%;
            }

            .btn-action {
                width: 100%;
            }
        }
 
    </style>
</head>

<body>

<!-- ================= BACKGROUND ================= -->
<div class="admin-bg">
    <img src="https://tinyurl.com/bdfwt4ec"
         class="admin-bg-image">
    <div class="admin-bg-overlay"></div>
</div>

<!-- ================= SIDEBAR ================= -->
<!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <img src="https://tinyurl.com/2k72rnvp" alt="SALONIX Logo">
        </div>
        
        <nav class="sidebar-menu">
            <div class="menu-item" onclick="showPage('dashboard')" data-page="dashboard">
                <img src="images/dashboard-sidebar.png" alt="Dashboard" class="menu-icon">
                Dashboard
            </div>

            <div class="menu-item" onclick="showPage('appointments')" data-page="appointments">
                <img src="images/appointment-sidebar.png" alt="Appointments" class="menu-icon">
                Appointments
            </div>

            <div class="menu-item" onclick="showPage('customers')" data-page="customers">
                <img src="images/customer-sidebar.png" alt="Customers" class="menu-icon">
                Customers
            </div>

            <div class="menu-item active" onclick="showPage('services')" data-page="services">
                <img src="images/service-sidebar.png" alt="Services" class="menu-icon">
                Services
            </div>

            <div class="menu-item" onclick="showPage('staffs')" data-page="staffs">
                <img src="images/staff-sidebar.png" alt="Staffs" class="menu-icon">
                Staffs
            </div>
        </nav>

    </aside>

<!-- ================= MAIN CONTENT ================= -->
<main class="main-content">
    <!-- Top Bar -->
        <div class="top-bar">
            
            <div class="top-bar-right">
                <div class="divider"></div>
                <div class="user-info">
                    <div class="user-avatar">
                        <div class="user-avatar-img"></div>
                        <div class="user-status"></div>
                    </div>
                    <div class="user-details">
                        <h4>Megat Ameer</h4>
                        <p>Admin</p>
                    </div>
                </div>
            </div>
        </div>

            <!-- ================= SERVICES TABLE ================= -->
        <div class="services-page">

                <div class="services-header">
                    <h2 class="services-title">List of Services</h2>
                    <div class="services-actions">
                        <div class="search-box">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7844 16.1991C11.646 18.6416 7.10629 18.4205 4.22156 15.5358C1.09737 12.4116 1.09737 7.34625 4.22156 4.22205C7.34576 1.09786 12.4111 1.09786 15.5353 4.22205C18.42 7.10677 18.6411 11.6464 16.1986 14.7849L20.4851 19.0713C20.8756 19.4618 20.8756 20.095 20.4851 20.4855C20.0945 20.876 19.4614 20.876 19.0708 20.4855L14.7844 16.1991ZM5.63578 14.1215C7.97892 16.4647 11.7779 16.4647 14.1211 14.1215C16.4642 11.7784 16.4642 7.97941 14.1211 5.63627C11.7779 3.29312 7.97892 3.29312 5.63578 5.63627C3.29263 7.97941 3.29263 11.7784 5.63578 14.1215Z" fill="#667085"/>
                            </svg>
                            <input type="text" id="searchInput" placeholder="Search service..." onkeyup="searchServices()">
                        </div>

                        <button class="btn-add-service" onclick="openAddModal()">Add New Service</button>
                    </div>
                </div>


    <div class="services-table">
        <table>
            <thead>
                <tr>
                    <th>No.</th>
                    <th>Category</th>
                    <th>Service</th>
                    <th>Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="servicesTableBody">
                <!-- DATA FROM DATABASE -->
            </tbody>
        </table>
    </div>

    <!-- âœ… PAGINATION MOVED HERE -->
    <div class="services-footer">
    <div class="pagination">

        <!-- PREVIOUS -->
        <button class="pagination-btn" onclick="changePage(-1)">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M12.6728 4.41058C12.9983 4.73602 12.9983 5.26366 12.6728 5.58909L8.26207 9.99984L12.6728 14.4106C12.9983 14.736 12.9983 15.2637 12.6728 15.5891C12.3474 15.9145 11.8197 15.9145 11.4943 15.5891L6.19968 10.2945C6.03696 10.1317 6.03696 9.86793 6.19968 9.70521L11.4943 4.41058C11.8197 4.08514 12.3474 4.08514 12.6728 4.41058Z"
                      fill="#5C59E8"/>
            </svg>
        </button>

        <div id="paginationNumbers" class="pagination-numbers-container">
            <!-- JS will insert page numbers here dynamically -->
        </div>

        <!-- NEXT -->
        <button class="pagination-btn" onclick="changePage(1)">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M7.32757 4.41058C7.00214 4.73602 7.00214 5.26366 7.32757 5.58909L11.7383 9.99984L7.32757 14.4106C7.00214 14.736 7.00214 15.2637 7.32757 15.5891C7.65301 15.9145 8.18065 15.9145 8.50608 15.5891L13.8007 10.2945C13.9634 10.1317 13.9634 9.86793 13.8007 9.70521L8.50608 4.41058C8.18065 4.08514 7.65301 4.08514 7.32757 4.41058Z"
                      fill="#5C59E8"/>
            </svg>
        </button>

    </div>
</div>


</div>


<!-- ================= ADD SERVICE MODAL ================= -->
<div class="modal-overlay" id="addModal">
    <div class="modal-content">

        <form onsubmit="submitAddService(event)">

            <div class="modal-header">
                <h3 class="modal-title">Add Service</h3>
            </div>

            <div class="modal-body">

                <input type="hidden" name="action" value="add">

                <div class="form-group">
                    <label class="form-label">Category</label>

                    <select class="form-input" name="category" required>
                        <option value="" disabled selected>Select Category</option>
                        <option value="Wash-Cut">Wash-Cut</option>
                        <option value="Dry-Cut">Dry-Cut</option>
                        <option value="Hair-Color">Hair-Color</option>
                        <option value="Treatments">Treatments</option>
                    </select>
                </div>


                <div class="form-group">
                    <label class="form-label">Service Name</label>
                    <input class="form-input" name="service" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Price (RM)</label>
                    <input class="form-input" type="number" step="0.01" name="price" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" name="description"></textarea>
                </div>

            </div>

            <div class="modal-footer">
                <button type="submit" class="btn-modal btn-modal-primary">
                    Save
                </button>

                <button type="button"
                        class="btn-modal btn-modal-secondary"
                        onclick="closeModal('addModal')">
                    Cancel
                </button>
            </div>

        </form>

    </div>
</div>

<!-- View Service Modal -->
    <div class="modal-overlay" id="viewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Service Details</h3>
            </div>
            <div class="modal-body">
                <div class="service-details">
                    <div class="detail-row">
                        <div class="detail-label">Category</div>
                        <div class="detail-value" id="viewCategory">Wash-Cut</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Service</div>
                        <div class="detail-value" id="viewService">Basic wash + Cut</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Price</div>
                        <div class="detail-value" id="viewPrice">RM 35</div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Description</div>
                        <div class="detail-value" id="viewDescription">A refreshing hair wash followed by a clean, simple haircut. Perfect for anyone who wants a neat look without styling extras.</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-secondary" onclick="closeModal('viewModal')">Back</button>
                <button class="btn-modal btn-modal-primary" onclick="openEditModalFromView()">Edit</button>
                <button class="btn-modal btn-modal-danger" onclick="openDeleteModalFromView()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Edit Service Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Service Details - Edit</h3>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-select" id="editCategory">
                            <option value="Wash-Cut">Wash-Cut</option>
                            <option value="Dry-Cut">Dry-Cut</option>
                            <option value="Hair-Color">Hair-Color</option>
                            <option value="Treatments">Treatments</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Service</label>
                            <input type="text" class="form-input" id="editService" placeholder="Service">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Price</label>
                            <input type="text" class="form-input" id="editPrice" placeholder="Price">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" id="editDescription" placeholder="Description"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-modal-danger" onclick="closeModal('editModal')">Cancel</button>
                <button class="btn-modal btn-modal-primary" onclick="saveEdit()">Save</button>
            </div>
        </div>
    </div>

            
            <!-- Delete Service Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <div class="confirmation-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.5 12L10.5 15L16.5 9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="#079455" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="confirmation-message">
                    Are you sure you want to permanently delete this service information? This action is irreversible.
                </div>
                <div style="display: flex; justify-content: flex-end; gap: 16px;">
                    <button class="btn-modal btn-modal-danger" onclick="closeModal('deleteModal')">Cancel</button>
                    <button class="btn-modal btn-modal-success" onclick="confirmDelete()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal (Edit) -->
    <div class="modal-overlay" id="successEditModal">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <div class="modal-icon">
                    <div class="icon-circle">
                        <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 18L16.5 21L23.25 14.25M11.0007 5.72804C12.2064 5.63182 13.3511 5.15769 14.2717 4.37313C16.4201 2.54229 19.5799 2.54229 21.7283 4.37313C22.6489 5.15769 23.7936 5.63182 24.9993 5.72804C27.8131 5.95258 30.0474 8.18692 30.272 11.0007C30.3682 12.2064 30.8423 13.3511 31.6269 14.2717C33.4577 16.4201 33.4577 19.5799 31.6269 21.7283C30.8423 22.6489 30.3682 23.7936 30.272 24.9993C30.0474 27.8131 27.8131 30.0474 24.9993 30.272C23.7936 30.3682 22.6489 30.8423 21.7283 31.6269C19.5799 33.4577 16.4201 33.4577 14.2717 31.6269C13.3511 30.8423 12.2064 30.3682 11.0007 30.272C8.18692 30.0474 5.95258 27.8131 5.72804 24.9993C5.63182 23.7936 5.15769 22.6489 4.37313 21.7283C2.54229 19.5799 2.54229 16.4201 4.37313 14.2717C5.15769 13.3511 5.63182 12.2064 5.72804 11.0007C5.95258 8.18692 8.18692 5.95258 11.0007 5.72804Z" stroke="#5C59E8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="modal-message">
                    Service details updated successfully!
                </div>
                <button class="btn-modal btn-modal-primary" onclick="closeModal('successEditModal')" style="width: 100%;">Okay</button>
            </div>
        </div>
    </div>

    <!-- Success Modal (Add) -->
    <div class="modal-overlay" id="successAddModal">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <div class="modal-icon">
                    <div class="icon-circle">
                        <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 18L16.5 21L23.25 14.25M11.0007 5.72804C12.2064 5.63182 13.3511 5.15769 14.2717 4.37313C16.4201 2.54229 19.5799 2.54229 21.7283 4.37313C22.6489 5.15769 23.7936 5.63182 24.9993 5.72804C27.8131 5.95258 30.0474 8.18692 30.272 11.0007C30.3682 12.2064 30.8423 13.3511 31.6269 14.2717C33.4577 16.4201 33.4577 19.5799 31.6269 21.7283C30.8423 22.6489 30.3682 23.7936 30.272 24.9993C30.0474 27.8131 27.8131 30.0474 24.9993 30.272C23.7936 30.3682 22.6489 30.8423 21.7283 31.6269C19.5799 33.4577 16.4201 33.4577 14.2717 31.6269C13.3511 30.8423 12.2064 30.3682 11.0007 30.272C8.18692 30.0474 5.95258 27.8131 5.72804 24.9993C5.63182 23.7936 5.15769 22.6489 4.37313 21.7283C2.54229 19.5799 2.54229 16.4201 4.37313 14.2717C5.15769 13.3511 5.63182 12.2064 5.72804 11.0007C5.95258 8.18692 8.18692 5.95258 11.0007 5.72804Z" stroke="#5C59E8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="modal-message">
                    New service record added successfully!
                </div>
                <button class="btn-modal btn-modal-primary" onclick="closeModal('successAddModal')" style="width: 100%;">Okay</button>
            </div>
        </div>
    </div>
    <!-- Success Modal (Delete) -->
    <div class="modal-overlay" id="successDeleteModal">
        <div class="modal-content modal-small">
            <div class="modal-body">
                <div class="modal-icon">
                    <div class="icon-circle">
                        <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 18L16.5 21L23.25 14.25M11.0007 5.72804C12.2064 5.63182 13.3511 5.15769 14.2717 4.37313C16.4201 2.54229 19.5799 2.54229 21.7283 4.37313C22.6489 5.15769 23.7936 5.63182 24.9993 5.72804C27.8131 5.95258 30.0474 8.18692 30.272 11.0007C30.3682 12.2064 30.8423 13.3511 31.6269 14.2717C33.4577 16.4201 33.4577 19.5799 31.6269 21.7283C30.8423 22.6489 30.3682 23.7936 30.272 24.9993C30.0474 27.8131 27.8131 30.0474 24.9993 30.272C23.7936 30.3682 22.6489 30.8423 21.7283 31.6269C19.5799 33.4577 16.4201 33.4577 14.2717 31.6269C13.3511 30.8423 12.2064 30.3682 11.0007 30.272C8.18692 30.0474 5.95258 27.8131 5.72804 24.9993C5.63182 23.7936 5.15769 22.6489 4.37313 21.7283C2.54229 19.5799 2.54229 16.4201 4.37313 14.2717C5.15769 13.3511 5.63182 12.2064 5.72804 11.0007C5.95258 8.18692 8.18692 5.95258 11.0007 5.72804Z" stroke="#5C59E8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="modal-message">
                    Service record deleted successfully!
                </div>
                <button class="btn-modal btn-modal-primary" onclick="closeModal('successDeleteModal')" style="width: 100%;">Okay</button>
            </div>
        </div>
    </div>

<!-- ================= JS ================= -->
<script>
let currentServiceId = null;
let currentPage = 1;
let totalPages = 1;
const pageSize = 5;
let currentKeyword = "";

/* ================= OPEN / CLOSE MODALS ================= */
function openModal(id) {
    document.getElementById(id).classList.add("active");
}

function closeModal(id) {
    document.getElementById(id).classList.remove("active");
}

/* ================= LOAD SERVICES ================= */
function loadServices(page = 1, keyword = "") {
    currentPage = page;
    currentKeyword = keyword;

    fetch(`ServiceServlet?page=${page}&keyword=${encodeURIComponent(keyword)}`)
        .then(res => res.text())
        .then(html => {
            // Extract total pages from comment <!--TOTAL_PAGES=7-->
            const match = html.match(/<!--TOTAL_PAGES=(\d+)-->/);
            if (match) totalPages = parseInt(match[1]);

            document.getElementById("servicesTableBody").innerHTML = html;
            renderPagination();
        });
}

/* ================= PAGINATION ================= */
function renderPagination() {
    const container = document.getElementById("paginationNumbers");
    container.innerHTML = "";

    if (totalPages <= 1) return; // ðŸ”´ IMPORTANT

    for (let i = 1; i <= totalPages; i++) {
        const page = document.createElement("div");
        page.className = "pagination-number" + (i === currentPage ? " active" : "");
        page.innerText = i;
        page.onclick = () => goToPage(i);
        container.appendChild(page);
    }
}

function goToPage(page) {
    loadServices(page, currentKeyword);
}

function changePage(step) {
    const nextPage = currentPage + step;
    if (nextPage < 1 || nextPage > totalPages) return;
    loadServices(nextPage, currentKeyword);
}

/* ================= SEARCH ================= */
function searchServices() {
    const keyword = document.getElementById("searchInput").value.trim();
    currentPage = 1;
    loadServices(1, keyword);
}


/* ================= VIEW SERVICE ================= */
function openViewModal(id) {
    fetch("ServiceServlet?id=" + id)
        .then(res => res.json())
        .then(data => {
            currentServiceId = id;
            document.getElementById("viewCategory").innerText = data.category;
            document.getElementById("viewService").innerText = data.service;
            document.getElementById("viewPrice").innerText = "RM " + data.price;
            document.getElementById("viewDescription").innerText = data.description;
            openModal("viewModal");
        });
}

/* ================= ADD SERVICE ================= */
function openAddModal() { openModal("addModal"); }

function submitAddService(e) {
    e.preventDefault();
    const form = e.target;
    const data = new URLSearchParams(new FormData(form));

    fetch("ServiceServlet?action=add", {
        method: "POST",
        body: data
    }).then(() => {
        closeModal("addModal");
        form.reset();
        loadServices(currentPage, currentKeyword);
        openModal("successAddModal");
    });
}

/* ================= EDIT SERVICE ================= */
function openEditModalDirect(id) {
    currentServiceId = id;
    fetch("ServiceServlet?id=" + id)
        .then(res => res.json())
        .then(data => {
            document.getElementById("editCategory").value = data.category;
            document.getElementById("editService").value = data.service;
            document.getElementById("editPrice").value = data.price;
            document.getElementById("editDescription").value = data.description;
            openModal("editModal");
        });
}

function openEditModalFromView() {
    closeModal("viewModal");
    openEditModalDirect(currentServiceId);
}

function saveEdit() {
    const data = new URLSearchParams({
        action: "edit",
        id: currentServiceId,
        category: editCategory.value,
        service: editService.value,
        price: editPrice.value,
        description: editDescription.value
    });

    fetch("ServiceServlet", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: data.toString()
    }).then(() => {
        closeModal("editModal");
        loadServices(currentPage, currentKeyword);
        openModal("successEditModal");
    });
}

/* ================= DELETE SERVICE ================= */
function deleteService(id) {
    currentServiceId = id;
    openModal("deleteModal");
}

function confirmDelete() {
    const data = new URLSearchParams({
        action: "delete",
        id: currentServiceId
    });

    fetch("ServiceServlet", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: data.toString()
    }).then(() => {
        closeModal("deleteModal");
        loadServices(currentPage, currentKeyword);
        openModal("successDeleteModal");
    });
}

function openDeleteModalFromView() {
    closeModal("viewModal");
    openModal("deleteModal");
}

/* ================= INIT ================= */
window.onload = () => {
    loadServices(1);
    document.getElementById("searchInput").addEventListener("input", searchServices);
};
</script>

</body>

</html>