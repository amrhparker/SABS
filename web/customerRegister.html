<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SALONIX - Register</title>
<link rel="stylesheet" href="style.css">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<script>
function togglePassword(id){
    const input = document.getElementById(id);
    input.type = input.type === "password" ? "text" : "password";
}
</script>

</head>
<body>

<div class="auth-container">

    <div class="pink-overlay"></div>

    <img src="images/logo.png" class="logo">

    <img src="images/leftSide.png" class="illustration-left">

    <img src="images/rightSide.png" class="illustration-right">

    <div class="card-wrapper">
        <div class="card">

            <div class="header">
                <div class="header-top">
                    <div class="welcome-text">Welcome to SALONIX</div>
                    <div class="auth-link-section">
                        <p class="auth-question">Have an account ?</p>
                        <a class="auth-link" href="login.html">Log In</a>
                    </div>
                </div>
                <h1>Register</h1>
            </div>

            <!-- Register Form -->
            <form class="auth-form register-form" id="registerForm" method="post" action="RegisterServlet">
                <!-- Name Field -->
                <div class="form-group">
                    <label for="registerName" class="form-label">Name</label>
                    <div class="input-wrapper">
                        <input
                            type="text"
                        id="registerName"
                        name="name"
                        class="form-input"
                        placeholder="Name"
                        required
                        >
                    </div>
                </div>

    <!-- Email and Phone Row -->
    <div class="form-row">
        <div class="form-group">
            <label for="registerEmail" class="form-label">Email Address</label>
            <div class="input-wrapper">
                <input
                    type="email"
                    id="registerEmail"
                    name="email"
                    class="form-input"
                    placeholder="Email Address"
                    required
                >
            </div>
        </div>
        <div class="form-group">
            <label for="registerPhone" class="form-label">Phone Number</label>
            <div class="input-wrapper">
                <input
                    type="tel"
                    id="registerPhone"
                    name="phone"
                    class="form-input"
                    placeholder="Phone Number"
                    required
                >
            </div>
        </div>
    </div>

    <!-- Password Field -->
    <div class="form-group">
        <label for="registerPassword" class="form-label">Password</label>
        <div class="input-wrapper">
            <input
                type="password"
                id="registerPassword"
                name="password"
                class="form-input password-input"
                placeholder="Password"
                required
            >
        </div>
    </div>

    <!-- Confirm Password Field -->
    <div class="form-group">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <div class="input-wrapper">
            <input
                type="password"
                id="confirmPassword"
                class="form-input password-input"
                placeholder="Confirm Password"
                required
            >
        </div>
    </div>

    <!-- Register Button -->
    <button type="submit" class="submit-button">Register</button>
</form>

        </div>
    </div>
</div>

<div id="registerSuccessModal" class="modal-overlay">
    <div class="modal-content">
        <img src="images/successLogo.png" class="modal-icon-img">
        <div class="modal-body">
            <h2 class="modal-title">Congratulations!</h2>
            <p class="modal-message">You have been registered, Log In now!</p>
            <button class="modal-button" onclick="closeModalAndShowLogin()">Okay</button>
        </div>
    </div>
</div>
    
    <script>
        document.getElementById('registerForm').addEventListener('submit', function(e){
            const password = document.getElementById('registerPassword').value;
            const confirm = document.getElementById('confirmPassword').value;
            if(password !== confirm){
                alert('Passwords do not match!');
                e.preventDefault(); // stop form from submitting
            }
        });
        
        // Show modal if redirected with success
window.addEventListener('load', function(){
    const params = new URLSearchParams(window.location.search);
    const success = params.get('success');

    if(success === 'true'){
        document.getElementById('registerSuccessModal').style.display = 'flex';
    } else if(success === 'false'){
        alert('Registration failed!');
    } else if(success === 'email'){
        alert('Email already registered!');
    }
});

function closeModalAndShowLogin(){
    window.location.href = "login.html";
}
    </script>
</body>
</html>
